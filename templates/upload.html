{% extends "layout.html" %}

{% block content %}

{% from 'bits.html' import metadata_table, files_table %}

<h1>Upload "{{ upload.name }}"</h1>

<h2>Metadata</h2>
{{ metadata_table(upload.metadata) }}

<h2>Existing files</h2>
{{ files_table(upload.get_path()) }}

<form method="post" enctype="multipart/form-data"
      action="{{ url_for('views.upload_file', name=upload.name) }}">
  <label for="form-upload-file">Add file</label>
  <input id="form-upload-file" type="file" name="file">
  <input type="submit" value="Upload">
</form>

<form method="post"
      action="{{ url_for('views.upload_finalize', name=upload.name) }}">
  <p>
    When all files are ready, finalize the upload, which will trigger
    the next workflow step.
  </p>
  <input type="submit" value="Finalize">
</form>

{% endblock %}
